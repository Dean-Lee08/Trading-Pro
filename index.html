<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Trading Platform Pro</title>
    
    <!-- Ïô∏Î∂Ä CSS ÌååÏùº Ïó∞Í≤∞ -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/hero-dashboard.css">
</head>
<body>
    <!-- Toast Notification -->
    <div class="toast-notification" id="toastNotification">
        Data saved successfully!
    </div>
    
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
    
    <!-- Date Picker Modal -->
    <div class="date-picker-modal" id="datePickerModal">
        <div class="date-picker-content">
            <div class="date-picker-title">Select Trading Date</div>
            <input class="date-picker-input" id="datePickerInput" type="date"/>
            <div class="date-picker-actions">
                <button class="btn btn-secondary" onclick="closeDatePicker()">Cancel</button>
                <button class="btn btn-primary" onclick="applySelectedDate()">Apply</button>
            </div>
        </div>
    </div>
    
    <!-- Edit Trade Modal -->
    <div class="edit-trade-modal" id="editTradeModal">
        <div class="edit-trade-content">
            <div class="edit-trade-title">Edit Trade</div>
            <form id="editTradeForm">
                <input id="editTradeId" type="hidden"/>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Symbol</label>
                        <input id="editSymbol" required="" type="text"/>
                    </div>
                    <div class="form-group">
                        <label>Shares</label>
                        <input id="editShares" required="" type="number"/>
                    </div>
                    <div class="form-group">
                        <label>Buy Price</label>
                        <input id="editBuyPrice" required="" step="0.0001" type="number"/>
                    </div>
                    <div class="form-group">
                        <label>Sell Price</label>
                        <input id="editSellPrice" required="" step="0.0001" type="number"/>
                    </div>
                    <div class="form-group">
                        <label>Entry Time</label>
                        <input id="editEntryTime" type="time"/>
                    </div>
                    <div class="form-group">
                        <label>Exit Time</label>
                        <input id="editExitTime" type="time"/>
                    </div>
                </div>
                <div class="edit-trade-actions">
                    <button class="btn btn-secondary" onclick="closeEditTradeModal()" type="button">Cancel</button>
                    <button class="btn btn-primary" type="submit">Update Trade</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Month Details Modal -->
    <div class="month-details-modal" id="monthDetailsModal">
        <div class="month-details-content">
            <div class="month-details-header" id="monthDetailsTitle">Month Details</div>
            <div class="month-details-stats">
                <div class="month-detail-stat">
                    <div class="month-detail-stat-value" id="monthDetailPnl">$0.00</div>
                    <div class="month-detail-stat-label" data-lang="total-pl">Total P/L</div>
                </div>
                <div class="month-detail-stat">
                    <div class="month-detail-stat-value neutral" id="monthDetailTrades">0</div>
                    <div class="month-detail-stat-label" data-lang="total-trades">Total Trades</div>
                </div>
                <div class="month-detail-stat">
                    <div class="month-detail-stat-value" id="monthDetailWinRate">0%</div>
                    <div class="month-detail-stat-label" data-lang="win-rate">Win Rate</div>
                </div>
            </div>
            <div style="margin-bottom: 16px;">
                <button class="btn btn-primary" data-lang="view-full-month" onclick="navigateToMonth()" style="width: 100%;">
                    View Full Month Calendar
                </button>
            </div>
            <div style="display: flex; justify-content: center;">
                <button class="btn btn-secondary" data-lang="close" onclick="closeMonthDetails()">Close</button>
            </div>
        </div>
    </div>
    
    <!-- Week Details Modal -->
    <div class="month-details-modal" id="weekDetailsModal">
        <div class="month-details-content">
            <div class="month-details-header" id="weekDetailsTitle">Week Details</div>
            <div class="month-details-stats">
                <div class="month-detail-stat">
                    <div class="month-detail-stat-value" id="weekDetailPnl">$0.00</div>
                    <div class="month-detail-stat-label" data-lang="total-pl">Total P/L</div>
                </div>
                <div class="month-detail-stat">
                    <div class="month-detail-stat-value neutral" id="weekDetailTrades">0</div>
                    <div class="month-detail-stat-label" data-lang="total-trades">Total Trades</div>
                </div>
                <div class="month-detail-stat">
                    <div class="month-detail-stat-value" id="weekDetailWinRate">0%</div>
                    <div class="month-detail-stat-label" data-lang="win-rate">Win Rate</div>
                </div>
            </div>
            <div style="max-height: 200px; overflow-y: auto; margin-bottom: 16px;">
                <div id="weekTradesList"></div>
            </div>
            <div style="display: flex; justify-content: center;">
                <button class="btn btn-secondary" data-lang="close" onclick="closeWeekDetails()">Close</button>
            </div>
        </div>
    </div>

    <!-- Daily Limit Warning Modal -->
    <div class="limit-warning-modal" id="limitWarningModal">
        <div class="limit-warning-content">
            <div class="limit-warning-icon" id="limitWarningIcon">‚ö†Ô∏è</div>
            <div class="limit-warning-title" id="limitWarningTitle">Warning</div>
            <div class="limit-warning-message" id="limitWarningMessage"></div>
            <div class="limit-warning-stats" id="limitWarningStats"></div>
            <div class="limit-warning-actions">
                <button class="btn btn-primary" onclick="closeLimitWarning()" id="limitWarningBtn">OK</button>
            </div>
        </div>
    </div>

    <div class="app-container">
        <!-- Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-brand">
                    <div class="sidebar-title">TradingPro</div>
                    <div class="sidebar-subtitle">Advanced Trading Journal</div>
                </div>
            </div>
            <div class="nav-menu">
                <button class="nav-item active" onclick="showPage('dashboard')">
                    <span class="nav-item-icon">üìä</span>
                    <span data-lang="dashboard">Dashboard</span>
                </button>
                <button class="nav-item" onclick="showPage('calendar')">
                    <span class="nav-item-icon">üìÖ</span>
                    <span data-lang="calendar">Calendar View</span>
                </button>
                <button class="nav-item" onclick="showPage('analysis')">
                    <span class="nav-item-icon">üìà</span>
                    <span data-lang="analytics">Analytics</span>
                </button>
                <button class="nav-item" onclick="showPage('psychology')">
                    <span class="nav-item-icon">üß†</span>
                    <span data-lang="psychology">Psychology</span>
                </button>
                <button class="nav-item" onclick="showPage('notes')">
                    <span class="nav-item-icon">üìù</span>
                    <span data-lang="notes">Notes</span>
                </button>
                <button class="nav-item" onclick="showPage('trades')">
                    <span class="nav-item-icon">üìã</span>
                    <span data-lang="tradelist">Trade List</span>
                </button>
                <button class="nav-item" onclick="showPage('settings')">
                    <span class="nav-item-icon">‚öôÔ∏è</span>
                    <span data-lang="settings">Settings</span>
                </button>
            </div>
        </nav>
        
        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <!-- Dashboard Page -->
            <div class="page active" id="dashboard">
                <div class="page-header">
                    <div>
                        <h1 class="page-title" data-lang="dashboard-title">Trading Dashboard</h1>
                        <p class="page-subtitle" data-lang="dashboard-subtitle">Track your trades and performance</p>
                    </div>
                    <div class="page-header-info">
                        <div class="date-range-selector">
                            <input class="date-range-input" id="dashboardStartDate" type="date"/>
                            <span style="color: #64748b;">to</span>
                            <input class="date-range-input" id="dashboardEndDate" type="date"/>
                            <button class="btn btn-secondary" onclick="clearDashboardRange()" style="padding: 4px 8px; font-size: 12px;">Clear</button>
                        </div>
                        <div class="date-navigation">
                            <button class="date-nav-btn" onclick="changeTradingDate(-1)" title="Previous day">&larr;</button>
                            <div class="current-date-display" id="currentDateDisplay" onclick="openDatePicker()"></div>
                            <button class="date-nav-btn" onclick="changeTradingDate(1)" title="Next day">&rarr;</button>
                        </div>
                        <div class="dashboard-tabs">
                            <button class="dashboard-tab active" data-lang="trading-record" onclick="showDashboardSection('trading')">Í±∞Îûò Í∏∞Î°ù</button>
                            <button class="dashboard-tab" data-lang="position-calculator" onclick="showDashboardSection('position-calc')">Position Calculator</button>
                        </div>
                    </div>
                </div>
                
                <div class="stats-overview">
                    <div class="stat-item">
                        <h3 data-lang="total-pl">Total P/L</h3>
                        <div class="stat-value" id="totalPL">$0.00</div>
                        <div class="stat-subtitle" data-lang="net-result">Net Result</div>
                    </div>
                    <div class="stat-item">
                        <h3 data-lang="trades">Trades</h3>
                        <div class="stat-value neutral" id="totalTrades">0</div>
                        <div class="stat-subtitle" data-lang="total-count">Total Count</div>
                    </div>
                    <div class="stat-item">
                        <h3 data-lang="win-rate">Win Rate</h3>
                        <div class="stat-value" id="winRate">0%</div>
                        <div class="stat-subtitle" id="winLossCount">0W / 0L</div>
                    </div>
                </div>
                
                <!-- Position Calculator Section -->
                <div class="position-calculator-section" id="positionCalculatorSection">
                    <div class="calculator-main-grid">
                        <div class="stats-sidebar">
                            <div class="sidebar-title-stats" data-lang="position-analysis">Position Analysis</div>
                            <div class="sidebar-stat">
                                <span class="sidebar-stat-label" data-lang="recommended-size">Recommended Size</span>
                                <span class="sidebar-stat-value positive" id="recommendedSize">$0</span>
                            </div>
                            <div class="sidebar-stat">
                                <span class="sidebar-stat-label" data-lang="account-utilization">Account Utilization</span>
                                <span class="sidebar-stat-value neutral" id="accountUtil">0%</span>
                            </div>
                            <div class="sidebar-stat">
                                <span class="sidebar-stat-label" data-lang="expected-value">Expected Value</span>
                                <span class="sidebar-stat-value" id="expectedVal">$0</span>
                            </div>
                            <div style="margin-top: 20px; padding-top: 16px; border-top: 1px solid #334155;">
                                <div class="sidebar-title-stats" data-lang="auto-analysis" style="font-size: 14px;">ÏûêÎèô Î∂ÑÏÑù</div>
                                <div class="sidebar-stat">
                                    <span class="sidebar-stat-label" data-lang="position-size">Ìè¨ÏßÄÏÖò ÌÅ¨Í∏∞</span>
                                    <span class="sidebar-stat-value positive" id="riskPositionSizeSidebar">$0</span>
                                </div>
                                <div class="sidebar-stat">
                                    <span class="sidebar-stat-label" data-lang="shares-quantity">Ï£ºÏãù ÏàòÎüâ</span>
                                    <span class="sidebar-stat-value neutral" id="riskSharesQuantitySidebar">0</span>
                                </div>
                                <div class="sidebar-stat">
                                    <span class="sidebar-stat-label" data-lang="risk-per-share">Ï£ºÎãπ Î¶¨Ïä§ÌÅ¨</span>
                                    <span class="sidebar-stat-value neutral" id="riskPerShareSidebar">$0.00</span>
                                </div>
                                <div class="sidebar-stat">
                                    <span class="sidebar-stat-label" data-lang="max-loss">ÏµúÎåÄ ÏÜêÏã§</span>
                                    <span class="sidebar-stat-value negative" id="riskMaxLossSidebar">$0.00</span>
                                </div>
                                <div class="sidebar-stat">
                                    <span class="sidebar-stat-label" data-lang="position-cost">Ìè¨ÏßÄÏÖò ÎπÑÏö©</span>
                                    <span class="sidebar-stat-value neutral" id="riskPositionCostSidebar">$0.00</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="calculator-container">
                            <!-- Calculator Tabs -->
                            <div style="display: flex; background: #0f172a; border: 1px solid #334155; border-radius: 8px; overflow: hidden; margin-bottom: 20px;">
                                <button class="position-calc-tab active" data-lang="kelly-calculator" onclick="showCalculatorTab('kelly')" style="background: #3b82f6; border: none; color: white; padding: 12px 20px; cursor: pointer; font-size: 14px; font-weight: 500; transition: all 0.2s ease; border-right: 1px solid #334155; flex: 1;">Kelly Calculator</button>
                                <button class="position-calc-tab" data-lang="risk-calculator" onclick="showCalculatorTab('risk')" style="background: transparent; border: none; color: #94a3b8; padding: 12px 20px; cursor: pointer; font-size: 14px; font-weight: 500; transition: all 0.2s ease; flex: 1;">Risk Calculator</button>
                            </div>
                            
                            <!-- Kelly Calculator Content -->
                            <div class="calculator-content" id="kellyCalculator">
                                <h2 class="calculator-title" data-lang="kelly-criterion-calculator">Kelly Criterion Calculator</h2>
                                <div class="calc-grid">
                                    <div class="calc-input-group">
                                        <label class="calc-label" data-lang="account-balance">Í≥ÑÏ¢å ÏûîÍ≥† ($)</label>
                                        <input class="calc-input" id="calcAccountBalance" oninput="calculatePosition()" type="number" value=""/>
                                    </div>
                                    <div class="calc-input-group">
                                        <label class="calc-label" data-lang="win-rate-input">ÏäπÎ•† (%)</label>
                                        <input class="calc-input" id="calcWinRate" max="100" min="0" oninput="calculatePosition()" type="number" value=""/>
                                    </div>
                                    <div class="calc-input-group">
                                        <label class="calc-label" data-lang="average-win">ÌèâÍ∑† ÏàòÏùµ ($)</label>
                                        <input class="calc-input" id="calcAvgWin" oninput="calculatePosition()" type="number" value=""/>
                                    </div>
                                    <div class="calc-input-group">
                                        <label class="calc-label" data-lang="average-loss">ÌèâÍ∑† ÏÜêÏã§ ($)</label>
                                        <input class="calc-input" id="calcAvgLoss" oninput="calculatePosition()" type="number" value=""/>
                                    </div>
                                </div>
                                <div class="calc-input-group">
                                    <button class="btn btn-secondary" data-lang="auto-load-trade-data" onclick="autoLoadTradeData()" style="width: 100%;">Auto Load from Trade History</button>
                                </div>
                                <div class="kelly-options">
                                    <div class="kelly-options-title" data-lang="kelly-strategies">Position Sizing Strategy</div>
                                    <div class="kelly-option selected" data-multiplier="0.1" onclick="selectKellyMultiplier(this)">
                                        <div class="kelly-option-label" data-lang="ultra-safe">Ultra Safe</div>
                                        <div class="kelly-option-value">10% Kelly</div>
                                    </div>
                                    <div class="kelly-option" data-multiplier="0.25" onclick="selectKellyMultiplier(this)">
                                        <div class="kelly-option-label" data-lang="conservative">Conservative</div>
                                        <div class="kelly-option-value">25% Kelly</div>
                                    </div>
                                    <div class="kelly-option" data-multiplier="0.5" onclick="selectKellyMultiplier(this)">
                                        <div class="kelly-option-label" data-lang="moderate">Moderate</div>
                                        <div class="kelly-option-value">50% Kelly</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Risk Calculator Content -->
                            <div class="calculator-content" id="riskCalculator" style="display: none;">
                                <h2 class="calculator-title" data-lang="risk-management-calculator">Risk Management Calculator</h2>
                                <div class="calc-grid">
                                    <div class="calc-input-group">
                                        <label class="calc-label" data-lang="account-balance">Í≥ÑÏ¢å ÏûîÍ≥† ($)</label>
                                        <input class="calc-input" id="riskAccountBalance" oninput="calculateRiskPosition()" type="number" value=""/>
                                    </div>
                                    <div class="calc-input-group">
                                        <label class="calc-label" data-lang="risk-percentage">Î¶¨Ïä§ÌÅ¨ ÎπÑÏú® (%)</label>
                                        <input class="calc-input" id="riskPercentage" max="10" min="0.1" oninput="calculateRiskPosition()" step="1" type="number" value=""/>
                                    </div>
                                    <div class="calc-input-group">
                                        <label class="calc-label" data-lang="entry-price">ÏßÑÏûÖ Í∞ÄÍ≤© ($)</label>
                                        <input class="calc-input" id="riskEntryPrice" oninput="calculateRiskPosition()" step="0.01" type="number" value=""/>
                                    </div>
                                    <div class="calc-input-group">
                                        <label class="calc-label" data-lang="stop-loss-price">ÏÜêÏ†à Í∞ÄÍ≤© ($)</label>
                                        <input class="calc-input" id="riskStopPrice" oninput="calculateRiskPosition()" step="0.01" type="number" value=""/>
                                    </div>
                                </div>
                                <div class="risk-preset-section">
                                    <div class="risk-preset-title">Î¶¨Ïä§ÌÅ¨ ÎπÑÏú®</div>
                                    <div class="risk-preset-buttons" style="gap: 4px;">
                                        <button class="risk-preset-btn" onclick="setRiskPreset(1)" style="background: #374151 !important; border: 1px solid #4b5563 !important; color: #e4e4e7 !important; padding: 8px 16px !important; border-radius: 6px !important; cursor: pointer !important; font-size: 13px !important; font-weight: 500 !important; transition: all 0.2s ease !important; min-width: 60px !important;">1%</button>
                                        <button class="risk-preset-btn active" onclick="setRiskPreset(2)" style="background: #3b82f6 !important; border: 1px solid #3b82f6 !important; color: white !important; padding: 8px 16px !important; border-radius: 6px !important; cursor: pointer !important; font-size: 13px !important; font-weight: 500 !important; transition: all 0.2s ease !important; min-width: 60px !important;">2%</button>
                                        <button class="risk-preset-btn" onclick="setRiskPreset(3)" style="background: #374151 !important; border: 1px solid #4b5563 !important; color: #e4e4e7 !important; padding: 8px 16px !important; border-radius: 6px !important; cursor: pointer !important; font-size: 13px !important; font-weight: 500 !important; transition: all 0.2s ease !important; min-width: 60px !important;">3%</button>
                                        <button class="risk-preset-btn" onclick="setRiskPreset(5)" style="background: #374151 !important; border: 1px solid #4b5563 !important; color: #e4e4e7 !important; padding: 8px 16px !important; border-radius: 6px !important; cursor: pointer !important; font-size: 13px !important; font-weight: 500 !important; transition: all 0.2s ease !important; min-width: 60px !important;">5%</button>
                                    </div>
                                </div>
                                <div class="calc-results">
                                    <div class="calc-result-item">
                                        <span class="calc-result-label" data-lang="position-size">Position Size</span>
                                        <span class="calc-result-value positive" id="riskPositionSize">$0</span>
                                    </div>
                                    <div class="calc-result-item">
                                        <span class="calc-result-label" data-lang="shares-quantity">Shares Quantity</span>
                                        <span class="calc-result-value neutral" id="riskSharesQuantity">0</span>
                                    </div>
                                    <div class="calc-result-item">
                                        <span class="calc-result-label" data-lang="risk-per-share">Risk per Share</span>
                                        <span class="calc-result-value neutral" id="riskPerShare">$0.00</span>
                                    </div>
                                    <div class="calc-result-item">
                                        <span class="calc-result-label" data-lang="max-loss">Max Loss</span>
                                        <span class="calc-result-value negative" id="riskMaxLoss">$0.00</span>
                                    </div>
                                    <div class="calc-result-item">
                                        <span class="calc-result-label" data-lang="position-cost">Position Cost</span>
                                        <span class="calc-result-value neutral" id="riskPositionCost">$0.00</span>
                                    </div>
                                    <div class="calc-result-item">
                                        <span class="calc-result-label" data-lang="account-utilization">Account Utilization</span>
                                        <span class="calc-result-value neutral" id="riskAccountUtil">0.00%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-grid">
                    <div class="trade-entry">
                        <h2 data-lang="record-trade">Record Trade</h2>
                        <form id="tradeForm">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label data-lang="symbol">Symbol</label>
                                    <input id="symbol" placeholder="AAPL" required="" type="text"/>
                                </div>
                                <div class="form-group">
                                    <label data-lang="shares">Shares</label>
                                    <input id="shares" oninput="calculatePnL()" placeholder="100" required="" type="number"/>
                                </div>
                                <div class="form-group">
                                    <label data-lang="buy-price">Buy Price</label>
                                    <input id="buyPrice" oninput="calculatePnL()" placeholder="150.25" required="" step="0.0001" type="number"/>
                                </div>
                                <div class="form-group">
                                    <label data-lang="sell-price">Sell Price</label>
                                    <input id="sellPrice" oninput="calculatePnL()" placeholder="155.50" required="" step="0.0001" type="number"/>
                                </div>
                                <div class="form-group">
                                    <label data-lang="return-pct">Return %</label>
                                    <input id="returnPct" readonly="" style="background: #0f172a; color: #10b981;" type="text"/>
                                </div>
                                <div class="form-group">
                                    <label data-lang="pnl">P&L</label>
                                    <input id="pnlDisplay" readonly="" style="background: #0f172a; color: #10b981;" type="text"/>
                                </div>
                                <div class="form-group">
                                    <label data-lang="entry-time">Entry Time</label>
                                    <div class="time-input-container">
                                        <input id="entryTime" type="time" value=""/>
                                        <button class="time-edit-btn" data-lang="edit" onclick="toggleTimeEdit()" type="button">Edit</button>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label data-lang="exit-time">Exit Time</label>
                                    <input id="exitTime" onchange="calculateHoldingTime()" type="time" value=""/>
                                </div>
                                <div class="form-group">
                                    <label data-lang="holding-time">Holding Time</label>
                                    <input id="holdingTimeDisplay" readonly="" style="background: #0f172a; color: #64748b;" type="text"/>
                                </div>
                                <div class="form-group">
                                    <label data-lang="amount">Amount ($)</label>
                                    <input id="amountDisplay" readonly="" style="background: #0f172a; color: #94a3b8;" type="text"/>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button class="btn btn-secondary" data-lang="reset" onclick="resetForm()" type="button">Reset</button>
                                <button class="btn btn-primary" data-lang="add-trade" type="submit">Add Trade</button>
                            </div>
                        </form>
                    </div>
                    
                    <div>
                        <div class="stats-sidebar">
                            <div class="sidebar-title-stats" data-lang="performance">Performance</div>
                            <div class="sidebar-stat">
                                <span class="sidebar-stat-label" data-lang="best-trade">Best Trade</span>
                                <span class="sidebar-stat-value positive" id="bestTrade">$0.00</span>
                            </div>
                            <div class="sidebar-stat">
                                <span class="sidebar-stat-label" data-lang="worst-trade">Worst Trade</span>
                                <span class="sidebar-stat-value negative" id="worstTrade">$0.00</span>
                            </div>
                            <div class="sidebar-stat">
                                <span class="sidebar-stat-label" data-lang="avg-win">Avg Win</span>
                                <span class="sidebar-stat-value positive" id="avgWin">$0.00</span>
                            </div>
                            <div class="sidebar-stat">
                                <span class="sidebar-stat-label" data-lang="avg-loss">Avg Loss</span>
                                <span class="sidebar-stat-value negative" id="avgLoss">$0.00</span>
                            </div>
                            <div class="sidebar-stat">
                                <span class="sidebar-stat-label" data-lang="total-invested">Total Invested</span>
                                <span class="sidebar-stat-value neutral" id="totalVolume">$0.00</span>
                            </div>
                            <div class="sidebar-stat">
                                <span class="sidebar-stat-label" data-lang="profit-factor">Profit Factor</span>
                                <span class="sidebar-stat-value" id="profitFactorSidebar">0.00</span>
                            </div>
                        </div>
                        
                        <div class="daily-fees-section">
                            <div class="daily-fees-title" data-lang="daily-fees">Daily Fees</div>
                            <input class="daily-fees-input" id="dailyFees" onchange="saveDailyFees()" placeholder="0.00" step="0.01" type="number"/>
                        </div>
                    </div>
                </div>
                
                <div class="trades-section">
                    <div class="trades-header">
                        <h2 data-lang="trade-history">Trade History</h2>
                        <div style="display: flex; gap: 12px; align-items: center;">
                            <button class="btn btn-secondary" data-lang="delete-selected" id="deleteSelectedBtn" onclick="deleteSelectedTrades()" style="display: none; background: #dc2626; border-color: #dc2626;">Delete Selected</button>
                            <div class="period-summary" id="periodSummary"></div>
                        </div>
                    </div>
                    <table class="trades-table">
                        <thead>
                            <tr>
                                <th style="width: 40px;">
                                    <input id="selectAllTrades" onchange="toggleAllTrades()" style="accent-color: #3b82f6;" type="checkbox"/>
                                </th>
                                <th data-lang="date">Date</th>
                                <th data-lang="symbol">Symbol</th>
                                <th data-lang="buy-price">Buy Price</th>
                                <th data-lang="sell-price">Sell Price</th>
                                <th data-lang="shares">Shares</th>
                                <th data-lang="amount">Amount</th>
                                <th data-lang="time">Time</th>
                                <th data-lang="pnl">P&L</th>
                                <th data-lang="return-pct">Return %</th>
                                <th data-lang="actions">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="tradesTableBody">
                            <tr>
                                <td colspan="11">
                                    <div class="empty-state">
                                        <div class="empty-state-icon">üìä</div>
                                        <div data-lang="no-trades">No trades recorded yet</div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Calendar Page -->
            <div class="page" id="calendar">
                <div class="page-header">
                    <div>
                        <h1 class="page-title" data-lang="calendar-title">Calendar View</h1>
                        <p class="page-subtitle" data-lang="calendar-subtitle">Visualize your trading performance over time</p>
                    </div>
                </div>
                
                <div class="calendar-container">
                    <div class="calendar-main-grid">
                        <div class="calendar-left">
                            <div class="calendar-controls">
                                <div class="calendar-nav">
                                    <button onclick="changeMonth(-1)">&larr; Previous</button>
                                    <h2 class="calendar-title" id="calendarTitle">January 2024</h2>
                                    <button onclick="changeMonth(1)">Next &rarr;</button>
                                </div>
                                <button class="btn btn-secondary" data-lang="clear-selection" onclick="clearCalendarRange()" style="padding: 6px 12px; font-size: 12px;">Clear Selection</button>
                            </div>
                            <div class="calendar-selection-info" data-lang="calendar-help" id="calendarSelectionInfo">
                                Click and drag on calendar to select date range, or click on a day to see details
                            </div>
                            <div class="calendar-stats-summary" id="calendarStatsSummary">
                                <div class="calendar-stat-item">
                                    <div class="calendar-stat-label" data-lang="selected-period">Selected Period</div>
                                    <div class="calendar-stat-value neutral" id="calendarPeriodLabel">Current Month</div>
                                </div>
                                <div class="calendar-stat-item">
                                    <div class="calendar-stat-label" data-lang="total-trades">Total Trades</div>
                                    <div class="calendar-stat-value neutral" id="calendarTotalTrades">0</div>
                                </div>
                                <div class="calendar-stat-item">
                                    <div class="calendar-stat-label" data-lang="total-pl">Total P/L</div>
                                    <div class="calendar-stat-value" id="calendarTotalPL">$0.00</div>
                                </div>
                                <div class="calendar-stat-item">
                                    <div class="calendar-stat-label" data-lang="avg-daily-pl">Avg Daily P/L</div>
                                    <div class="calendar-stat-value" id="calendarAvgDaily">$0.00</div>
                                </div>
                                <div class="calendar-stat-item">
                                    <div class="calendar-stat-label" data-lang="best-day">Best Day</div>
                                    <div class="calendar-stat-value positive" id="calendarBestDay">$0.00</div>
                                </div>
                                <div class="calendar-stat-item">
                                    <div class="calendar-stat-label" data-lang="worst-day">Worst Day</div>
                                    <div class="calendar-stat-value negative" id="calendarWorstDay">$0.00</div>
                                </div>
                            </div>
                            <div class="calendar-grid" id="calendarGrid">
                                <div class="calendar-day-header">Sun</div>
                                <div class="calendar-day-header">Mon</div>
                                <div class="calendar-day-header">Tue</div>
                                <div class="calendar-day-header">Wed</div>
                                <div class="calendar-day-header">Thu</div>
                                <div class="calendar-day-header">Fri</div>
                                <div class="calendar-day-header">Sat</div>
                                <div class="calendar-day-header" id="weekPnlHeader" style="display: none;">Week P/L</div>
                            </div>
                        </div>
                        
                        <!-- Right Sidebar -->
                        <div class="calendar-sidebar">
                            <div class="sidebar-title-calendar" data-lang="weekly-summary">Weekly Summary</div>
                            <div class="weekly-summary" id="weeklySummary">
                                <div class="weekly-item">
                                    <span class="weekly-label" data-lang="selected-week">Selected Week</span>
                                    <span class="weekly-value neutral" id="selectedWeekLabel">-</span>
                                </div>
                                <div class="weekly-item">
                                    <span class="weekly-label" data-lang="week-trades">Week Trades</span>
                                    <span class="weekly-value neutral" id="selectedWeekTrades">0</span>
                                </div>
                                <div class="weekly-item">
                                    <span class="weekly-label" data-lang="week-pnl">Week P/L</span>
                                    <span class="weekly-value" id="selectedWeekPnl">$0.00</span>
                                </div>
                                <div class="weekly-item">
                                    <span class="weekly-label" data-lang="week-win-rate">Week Win Rate</span>
                                    <span class="weekly-value" id="selectedWeekWinRate">0%</span>
                                </div>
                                <div class="weekly-item">
                                    <span class="weekly-label" data-lang="week-best-day">Best Day</span>
                                    <span class="weekly-value positive" id="selectedWeekBestDay">$0.00</span>
                                </div>
                                <div class="weekly-item">
                                    <span class="weekly-label" data-lang="week-worst-day">Worst Day</span>
                                    <span class="weekly-value negative" id="selectedWeekWorstDay">$0.00</span>
                                </div>
                            </div>
                            
                            <!-- Day Details Section -->
                            <div class="day-details" id="dayDetails" style="display: none;">
                                <div class="day-details-title" id="dayDetailsTitle">Selected Day</div>
                                <div id="dayTradesList">
                                    <!-- Individual trades for selected day -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Annual Heatmap -->
                    <div class="annual-heatmap-container">
                        <div class="annual-heatmap-title" id="annualHeatmapTitle">2024 Trading Overview</div>
                        <div class="annual-heatmap-grid" id="annualHeatmapGrid">
                            <!-- Month heatmaps will be generated here -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Analytics Page -->
            <div class="page" id="analysis">
                <div class="analytics-container">
                    <div class="analytics-header">
                        <div class="analytics-title-section">
                            <div class="analytics-tabs">
                                <button class="analytics-tab active" onclick="showAnalyticsSection('detail')"><span data-lang="detail">Detail</span></button>
                                <button class="analytics-tab" onclick="showAnalyticsSection('patterns')"><span data-lang="algorithmic-analysis">Algorithmic Analysis</span></button>
                                <button class="analytics-tab" onclick="showAnalyticsSection('charts')"><span data-lang="charts">Charts</span></button>
                            </div>
                        </div>
                        <div class="filter-controls">
                            <div class="date-range-selector">
                                <input class="date-range-input" id="analyticsStartDate" type="date"/>
                                <span style="color: #64748b;">to</span>
                                <input class="date-range-input" id="analyticsEndDate" type="date"/>
                                <button class="btn btn-secondary" onclick="clearAnalyticsRange()" style="padding: 4px 8px; font-size: 12px;">Clear</button>
                            </div>
                            <button class="filter-btn active" data-lang="all-time" onclick="setAnalyticsPeriod('all')">All Time</button>
                        </div>
                    </div>
                    
                    <!-- Performance Summary Cards -->
                    <div class="performance-summary">
                        <div class="performance-summary-title" data-lang="performance-summary">Performance Summary</div>
                        <div class="summary-cards">
                            <div class="summary-card">
                                <div class="summary-card-value" id="summaryNetProfit">$0.00</div>
                                <div class="summary-card-label" data-lang="net-profit">Net Profit</div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-card-value neutral" id="summaryTotalTrades">0</div>
                                <div class="summary-card-label" data-lang="total-trades">Total Trades</div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-card-value" id="summaryWinRate">0%</div>
                                <div class="summary-card-label" data-lang="win-rate">Win Rate</div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-card-value" id="summaryProfitFactor">0.00</div>
                                <div class="summary-card-label" data-lang="profit-factor">Profit Factor</div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-card-value" id="summaryLargestWin">$0.00</div>
                                <div class="summary-card-label" data-lang="largest-win">Largest Win</div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-card-value" id="summaryLargestLoss">$0.00</div>
                                <div class="summary-card-label" data-lang="largest-loss">Largest Loss</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Detail Section -->
                    <div class="detail-section active" id="detailSection">
                        <div class="detail-grid">
                            <!-- Trading Performance -->
                            <div class="detail-card">
                                <div class="detail-card-header" data-lang="trading-performance" onclick="toggleDetailCard(this)">
                                    Trading Performance
                                    <span class="collapse-icon">‚ñº</span>
                                </div>
                                <div class="detail-card-content">
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="total-pl">Total P&L</span>
                                        <span class="detail-value" id="detailTotalPL">$0.00</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="total-gain">Total Gain</span>
                                        <span class="detail-value positive" id="detailTotalGain">$0.00</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="total-loss">Total Loss</span>
                                        <span class="detail-value negative" id="detailTotalLoss">$0.00</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="total-fees">Total Fees</span>
                                        <span class="detail-value neutral" id="detailTotalFees">$0.00</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="total-volume">Total Volume</span>
                                        <span class="detail-value neutral" id="detailTotalVolume">$0.00</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="profit-factor">Profit Factor</span>
                                        <span class="detail-value" id="detailProfitFactor">0.00</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Win/Loss Statistics -->
                            <div class="detail-card">
                                <div class="detail-card-header" data-lang="win-loss-stats" onclick="toggleDetailCard(this)">
                                    Win/Loss Statistics
                                    <span class="collapse-icon">‚ñº</span>
                                </div>
                                <div class="detail-card-content">
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="winning-trades">Winning Trades</span>
                                        <span class="detail-value positive" id="detailWinningTrades">0 (0%)</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="losing-trades">Losing Trades</span>
                                        <span class="detail-value negative" id="detailLosingTrades">0 (0%)</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="avg-winning-trade">Avg Winning Trade</span>
                                        <span class="detail-value positive" id="detailAvgWinningTrade">$0.00</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="avg-losing-trade">Avg Losing Trade</span>
                                        <span class="detail-value negative" id="detailAvgLosingTrade">$0.00</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="largest-win">Largest Win</span>
                                        <span class="detail-value positive" id="detailLargestWin">$0.00</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="largest-loss">Largest Loss</span>
                                        <span class="detail-value negative" id="detailLargestLoss">$0.00</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Daily Performance -->
                            <div class="detail-card">
                                <div class="detail-card-header" data-lang="daily-performance" onclick="toggleDetailCard(this)">
                                    Daily Performance
                                    <span class="collapse-icon">‚ñº</span>
                                </div>
                                <div class="detail-card-content">
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="daily-per-win">Daily P&L per Win</span>
                                        <span class="detail-value positive" id="detailDailyPerWin">$0.00</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="daily-per-loss">Daily P&L per Loss</span>
                                        <span class="detail-value negative" id="detailDailyPerLoss">$0.00</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="daily-per-fees">Daily Fees per Day</span>
                                        <span class="detail-value neutral" id="detailDailyPerFees">$0.00</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="best-trading-day">Best Trading Day</span>
                                        <span class="detail-value positive" id="detailBestTradingDay">$0.00</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="worst-trading-day">Worst Trading Day</span>
                                        <span class="detail-value negative" id="detailWorstTradingDay">$0.00</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="avg-daily-pl">Avg Daily P&L</span>
                                        <span class="detail-value" id="detailAvgDailyPL">$0.00</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Time Analysis -->
                            <div class="detail-card">
                                <div class="detail-card-header" data-lang="time-analysis" onclick="toggleDetailCard(this)">
                                    Time Analysis
                                    <span class="collapse-icon">‚ñº</span>
                                </div>
                                <div class="detail-card-content">
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="avg-hold-time">Avg Hold Time</span>
                                        <span class="detail-value neutral" id="detailAvgHoldTime">0m</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="shortest-hold">Shortest Hold</span>
                                        <span class="detail-value neutral" id="detailShortestHold">0m</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="longest-hold">Longest Hold</span>
                                        <span class="detail-value neutral" id="detailLongestHold">0m</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="best-trading-hour">Best Trading Hour</span>
                                        <span class="detail-value" id="detailBestHour">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="worst-trading-hour">Worst Trading Hour</span>
                                        <span class="detail-value" id="detailWorstHour">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="best-day-week">Best Day of Week</span>
                                        <span class="detail-value" id="detailBestDayOfWeek">-</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Trading Activity -->
                            <div class="detail-card">
                                <div class="detail-card-header" data-lang="trading-activity" onclick="toggleDetailCard(this)">
                                    Trading Activity
                                    <span class="collapse-icon">‚ñº</span>
                                </div>
                                <div class="detail-card-content">
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="trading-days">Trading Days</span>
                                        <span class="detail-value neutral" id="detailTradingDays">0</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="avg-trades-per-day">Avg Trades per Day</span>
                                        <span class="detail-value neutral" id="detailAvgTradesPerDay">0.00</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="max-trades-day">Max Trades in Day</span>
                                        <span class="detail-value neutral" id="detailMaxTradesDay">0</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="avg-position-size">Avg Position Size</span>
                                        <span class="detail-value neutral" id="detailAvgPositionSize">$0</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="largest-position">Largest Position</span>
                                        <span class="detail-value neutral" id="detailLargestPosition">$0</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="smallest-position">Smallest Position</span>
                                        <span class="detail-value neutral" id="detailSmallestPosition">$0</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Streak Analysis -->
                            <div class="detail-card">
                                <div class="detail-card-header" data-lang="streak-analysis" onclick="toggleDetailCard(this)">
                                    Streak Analysis
                                    <span class="collapse-icon">‚ñº</span>
                                </div>
                                <div class="detail-card-content">
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="current-streak">Current Streak</span>
                                        <span class="detail-value" id="detailCurrentStreak">0</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="max-win-streak">Max Win Streak</span>
                                        <span class="detail-value positive" id="detailMaxWinStreak">0</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="max-loss-streak">Max Loss Streak</span>
                                        <span class="detail-value negative" id="detailMaxLossStreak">0</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="current-win-streak">Current Win Streak</span>
                                        <span class="detail-value" id="detailCurrentWinStreak">0</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="current-loss-streak">Current Loss Streak</span>
                                        <span class="detail-value" id="detailCurrentLossStreak">0</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="avg-win-streak">Avg Win Streak</span>
                                        <span class="detail-value" id="detailAvgWinStreak">0.00</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Symbol Performance -->
                            <div class="detail-card">
                                <div class="detail-card-header" data-lang="symbol-performance" onclick="toggleDetailCard(this)">
                                    Symbol Performance
                                    <span class="collapse-icon">‚ñº</span>
                                </div>
                                <div class="detail-card-content">
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="most-profitable-symbol">Most Profitable</span>
                                        <span class="detail-value" id="detailMostProfitableSymbol">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="least-profitable-symbol">Least Profitable</span>
                                        <span class="detail-value" id="detailLeastProfitableSymbol">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="most-traded-symbol">Most Traded</span>
                                        <span class="detail-value" id="detailMostTradedSymbol">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="unique-symbols">Unique Symbols</span>
                                        <span class="detail-value neutral" id="detailUniqueSymbols">0</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="symbol-win-rate">Best Symbol Win Rate</span>
                                        <span class="detail-value" id="detailBestSymbolWinRate">0%</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="symbol-avg-return">Best Symbol Avg Return</span>
                                        <span class="detail-value" id="detailBestSymbolReturn">0%</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Risk Management -->
                            <div class="detail-card">
                                <div class="detail-card-header" data-lang="risk-management" onclick="toggleDetailCard(this)">
                                    Risk Management
                                    <span class="collapse-icon">‚ñº</span>
                                </div>
                                <div class="detail-card-content">
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="max-drawdown">Max Drawdown</span>
                                        <span class="detail-value negative" id="detailMaxDrawdown">$0.00</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="current-drawdown">Current Drawdown</span>
                                        <span class="detail-value" id="detailCurrentDrawdown">$0.00</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="recovery-factor">Recovery Factor</span>
                                        <span class="detail-value" id="detailRecoveryFactor">0.00</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="max-daily-loss">Max Daily Loss</span>
                                        <span class="detail-value negative" id="detailMaxDailyLoss">$0.00</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="max-daily-gain">Max Daily Gain</span>
                                        <span class="detail-value positive" id="detailMaxDailyGain">$0.00</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="risk-reward-ratio">Avg Risk/Reward</span>
                                        <span class="detail-value" id="detailRiskRewardRatio">0.00</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Market Characteristics -->
                            <div class="detail-card">
                                <div class="detail-card-header" data-lang="market-characteristics" onclick="toggleDetailCard(this)">
                                    Market Characteristics
                                    <span class="collapse-icon">‚ñº</span>
                                </div>
                                <div class="detail-card-content">
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="avg-float-winners">Avg Float (Winners)</span>
                                        <span class="detail-value" id="detailAvgFloat">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="avg-marketcap-winners">Avg Market Cap (Winners)</span>
                                        <span class="detail-value" id="detailAvgMarketCap">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="avg-beta-winners">Avg Beta (Winners)</span>
                                        <span class="detail-value" id="detailAvgBeta">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="symbols-analyzed">Symbols Analyzed</span>
                                        <span class="detail-value neutral" id="detailSymbolsAnalyzed">0</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Volume & Liquidity -->
                            <div class="detail-card">
                                <div class="detail-card-header" data-lang="volume-liquidity" onclick="toggleDetailCard(this)">
                                    Volume & Liquidity
                                    <span class="collapse-icon">‚ñº</span>
                                </div>
                                <div class="detail-card-content">
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="high-volume-winrate">High Volume Win Rate</span>
                                        <span class="detail-value" id="detailHighVolumeWinRate">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="low-volume-winrate">Low Volume Win Rate</span>
                                        <span class="detail-value" id="detailLowVolumeWinRate">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="median-volume">Median Volume</span>
                                        <span class="detail-value neutral" id="detailMedianVolume">-</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Volatility Performance -->
                            <div class="detail-card">
                                <div class="detail-card-header" data-lang="volatility-performance" onclick="toggleDetailCard(this)">
                                    Volatility Performance
                                    <span class="collapse-icon">‚ñº</span>
                                </div>
                                <div class="detail-card-content">
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="high-volatility">High Volatility (Beta > 1.5)</span>
                                        <span class="detail-value" id="detailHighVolatilityWinRate">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="medium-volatility">Medium Volatility (1.0-1.5)</span>
                                        <span class="detail-value" id="detailMediumVolatilityWinRate">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="low-volatility">Low Volatility (Beta < 1.0)</span>
                                        <span class="detail-value" id="detailLowVolatilityWinRate">-</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Market Cap Preference -->
                            <div class="detail-card">
                                <div class="detail-card-header" data-lang="marketcap-preference" onclick="toggleDetailCard(this)">
                                    Market Cap Preference
                                    <span class="collapse-icon">‚ñº</span>
                                </div>
                                <div class="detail-card-content">
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="small-cap">Small Cap (< $2B)</span>
                                        <span class="detail-value" id="detailSmallCapWinRate">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="mid-cap">Mid Cap ($2B - $10B)</span>
                                        <span class="detail-value" id="detailMidCapWinRate">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="large-cap">Large Cap (> $10B)</span>
                                        <span class="detail-value" id="detailLargeCapWinRate">-</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Intraday Performance -->
                            <div class="detail-card">
                                <div class="detail-card-header" data-lang="intraday-performance" onclick="toggleDetailCard(this)">
                                    Intraday Performance
                                    <span class="collapse-icon">‚ñº</span>
                                </div>
                                <div class="detail-card-content">
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="intraday-20">Up 20%+ at Entry</span>
                                        <span class="detail-value" id="detailIntraday20">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="intraday-30">Up 30%+ at Entry</span>
                                        <span class="detail-value" id="detailIntraday30">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="intraday-50">Up 50%+ at Entry</span>
                                        <span class="detail-value" id="detailIntraday50">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="intraday-100">Up 100%+ at Entry</span>
                                        <span class="detail-value" id="detailIntraday100">-</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Sector Performance -->
                            <div class="detail-card">
                                <div class="detail-card-header" data-lang="sector-performance" onclick="toggleDetailCard(this)">
                                    Sector Performance
                                    <span class="collapse-icon">‚ñº</span>
                                </div>
                                <div class="detail-card-content" id="sectorPerformanceContent">
                                    <div class="detail-item">
                                        <span class="detail-label">Loading...</span>
                                        <span class="detail-value">-</span>
                                    </div>
                                </div>
                            </div>

                            <!-- SPY Correlation -->
                            <div class="detail-card">
                                <div class="detail-card-header" data-lang="spy-correlation" onclick="toggleDetailCard(this)">
                                    SPY Direction Correlation
                                    <span class="collapse-icon">‚ñº</span>
                                </div>
                                <div class="detail-card-content">
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="spy-up-days">SPY Up Days</span>
                                        <span class="detail-value" id="detailSPYUpDays">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="spy-down-days">SPY Down Days</span>
                                        <span class="detail-value" id="detailSPYDownDays">-</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Relative Volume -->
                            <div class="detail-card">
                                <div class="detail-card-header" data-lang="relative-volume" onclick="toggleDetailCard(this)">
                                    Relative Volume Correlation
                                    <span class="collapse-icon">‚ñº</span>
                                </div>
                                <div class="detail-card-content">
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="high-rel-vol">High Rel Vol (2.0x+)</span>
                                        <span class="detail-value" id="detailHighRelVol">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="medium-rel-vol">Medium Rel Vol (1.5-2.0x)</span>
                                        <span class="detail-value" id="detailMediumRelVol">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="normal-rel-vol">Normal Rel Vol (<1.5x)</span>
                                        <span class="detail-value" id="detailNormalRelVol">-</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Entry/Exit Timing Quality (NEW) -->
                            <div class="detail-card">
                                <div class="detail-card-header" data-lang="entry-exit-timing" onclick="toggleDetailCard(this)">
                                    Entry/Exit Timing Quality
                                    <span class="collapse-icon">‚ñº</span>
                                </div>
                                <div class="detail-card-content">
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="avg-entry-position">Avg Entry Position</span>
                                        <span class="detail-value neutral" id="detailAvgEntryPosition">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="avg-exit-position">Avg Exit Position</span>
                                        <span class="detail-value neutral" id="detailAvgExitPosition">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="timing-score">Timing Score</span>
                                        <span class="detail-value" id="detailTimingScore">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="early-entry-rate">Early Entry Rate</span>
                                        <span class="detail-value neutral" id="detailEarlyEntryRate">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="profit-taking-rate">Profit Taking Rate</span>
                                        <span class="detail-value neutral" id="detailProfitTakingRate">-</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Gap Trading Performance (NEW) -->
                            <div class="detail-card">
                                <div class="detail-card-header" data-lang="gap-trading-performance" onclick="toggleDetailCard(this)">
                                    Gap Trading Performance
                                    <span class="collapse-icon">‚ñº</span>
                                </div>
                                <div class="detail-card-content">
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="gap-up-winrate">Gap Up Win Rate</span>
                                        <span class="detail-value" id="detailGapUpWinRate">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="gap-down-winrate">Gap Down Win Rate</span>
                                        <span class="detail-value" id="detailGapDownWinRate">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="large-gap-winrate">Large Gap (5%+) Win Rate</span>
                                        <span class="detail-value" id="detailLargeGapWinRate">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="best-gap-range">Best Gap Range</span>
                                        <span class="detail-value neutral" id="detailBestGapRange">-</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Sector Rotation (NEW) -->
                            <div class="detail-card">
                                <div class="detail-card-header" data-lang="sector-rotation" onclick="toggleDetailCard(this)">
                                    Sector Rotation Analysis
                                    <span class="collapse-icon">‚ñº</span>
                                </div>
                                <div class="detail-card-content">
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="top-sector">Top Performing Sector</span>
                                        <span class="detail-value neutral" id="detailTopSector">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="sector-winrate">Sector Win Rate</span>
                                        <span class="detail-value" id="detailSectorWinRate">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="sector-avg-return">Sector Avg Return</span>
                                        <span class="detail-value" id="detailSectorAvgReturn">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="sector-diversity">Sector Diversity</span>
                                        <span class="detail-value neutral" id="detailSectorDiversity">-</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Price Level Psychology (NEW) -->
                            <div class="detail-card">
                                <div class="detail-card-header" data-lang="price-level-psychology" onclick="toggleDetailCard(this)">
                                    Price Level Psychology
                                    <span class="collapse-icon">‚ñº</span>
                                </div>
                                <div class="detail-card-content">
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="under-5-winrate">Under $5 Win Rate</span>
                                        <span class="detail-value" id="detailUnder5WinRate">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="range-5-20-winrate">$5-$20 Win Rate</span>
                                        <span class="detail-value" id="detailRange5to20WinRate">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="over-20-winrate">Over $20 Win Rate</span>
                                        <span class="detail-value" id="detailOver20WinRate">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="optimal-price-range">Optimal Price Range</span>
                                        <span class="detail-value neutral" id="detailOptimalPriceRange">-</span>
                                    </div>
                                </div>
                            </div>

                            <!-- ATR Correlation (NEW) -->
                            <div class="detail-card">
                                <div class="detail-card-header" data-lang="atr-correlation" onclick="toggleDetailCard(this)">
                                    Volatility (ATR) Correlation
                                    <span class="collapse-icon">‚ñº</span>
                                </div>
                                <div class="detail-card-content">
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="high-vol-winrate">High Volatility Win Rate</span>
                                        <span class="detail-value" id="detailHighVolWinRate">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="low-vol-winrate">Low Volatility Win Rate</span>
                                        <span class="detail-value" id="detailLowVolWinRate">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label" data-lang="median-volatility">Median Volatility</span>
                                        <span class="detail-value neutral" id="detailMedianVolatility">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Basic Charts Section in Detail -->
                        <div class="basic-charts-section">
                            <div class="basic-charts-title" data-lang="basic-charts">Basic Performance Charts</div>
                            <div class="basic-charts-grid">
                                <div class="basic-chart-card">
                                    <div class="basic-chart-header" data-lang="cumulative-pl">Cumulative P&L</div>
                                    <div class="basic-chart-content">
                                        <canvas class="chart-canvas" id="basicCumulativePLChart"></canvas>
                                    </div>
                                </div>
                                <div class="basic-chart-card">
                                    <div class="basic-chart-header" data-lang="win-loss-ratio">Win/Loss Distribution</div>
                                    <div class="basic-chart-content">
                                        <canvas class="chart-canvas" id="basicWinLossChart"></canvas>
                                    </div>
                                </div>
                                <div class="basic-chart-card">
                                    <div class="basic-chart-header" data-lang="daily-pl">Daily P&L</div>
                                    <div class="basic-chart-content">
                                        <canvas class="chart-canvas" id="basicDailyPLChart"></canvas>
                                    </div>
                                </div>
                                <div class="basic-chart-card">
                                    <div class="basic-chart-header" data-lang="monthly-performance">Monthly Performance</div>
                                    <div class="basic-chart-content">
                                        <canvas class="chart-canvas" id="basicMonthlyChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Advanced Charts Section -->
                    <div class="chart-section" id="chartSection">
                        <div class="advanced-charts-grid">
                            <div class="chart-container">
                                <div class="chart-header" data-lang="equity-curve">Equity Curve</div>
                                <div class="chart-content">
                                    <canvas class="chart-canvas" id="equityCurveChart"></canvas>
                                </div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-header" data-lang="drawdown-chart">Drawdown Analysis</div>
                                <div class="chart-content">
                                    <canvas class="chart-canvas" id="drawdownChart"></canvas>
                                </div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-header" data-lang="symbol-performance-chart">Symbol Performance</div>
                                <div class="chart-content">
                                    <canvas class="chart-canvas" id="symbolPerformanceChart"></canvas>
                                </div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-header" data-lang="time-distribution">Time Distribution</div>
                                <div class="chart-content">
                                    <canvas class="chart-canvas" id="timeDistributionChart"></canvas>
                                </div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-header" data-lang="return-distribution">Return Distribution</div>
                                <div class="chart-content">
                                    <canvas class="chart-canvas" id="returnDistributionChart"></canvas>
                                </div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-header" data-lang="volume-analysis">Volume Analysis</div>
                                <div class="chart-content">
                                    <canvas class="chart-canvas" id="volumeAnalysisChart"></canvas>
                                </div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-header" data-lang="correlation-matrix">Performance Correlation</div>
                                <div class="chart-content">
                                    <canvas class="chart-canvas" id="correlationMatrixChart"></canvas>
                                </div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-header" data-lang="performance-attribution">Performance Attribution</div>
                                <div class="chart-content">
                                    <canvas class="chart-canvas" id="performanceAttributionChart"></canvas>
                                </div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-header" data-lang="trade-duration-analysis">Trade Duration Analysis</div>
                                <div class="chart-content">
                                    <canvas class="chart-canvas" id="tradeDurationAnalysisChart"></canvas>
                                </div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-header" data-lang="win-rate-by-time">Win Rate by Time</div>
                                <div class="chart-content">
                                    <canvas class="chart-canvas" id="winRateByTimeChart"></canvas>
                                </div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-header" data-lang="position-sizing-analysis">Position Sizing Analysis</div>
                                <div class="chart-content">
                                    <canvas class="chart-canvas" id="positionSizingAnalysisChart"></canvas>
                                </div>
                            </div>
                            <div class="chart-container">
                                <div class="chart-header" data-lang="trading-efficiency-metrics">Trading Efficiency Metrics</div>
                                <div class="chart-content">
                                    <canvas class="chart-canvas" id="tradingEfficiencyMetricsChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Algorithmic Analysis Section -->
                    <div class="detail-section" id="patternsSection">
                        <div class="psychology-container">

                            <!-- ========== HERO DASHBOARD ========== -->
                            <div class="ai-hero-dashboard">
                                <div class="hero-header">
                                    <div class="ai-badge-container">
                                        <div class="ai-badge pulse">
                                            <span class="badge-icon">ü§ñ</span>
                                            <span class="badge-text">AI-POWERED</span>
                                        </div>
                                    </div>
                                    <h1 class="hero-title">
                                        <span class="title-gradient">Trading Intelligence Center</span>
                                    </h1>
                                    <p class="hero-subtitle">
                                        Real-time algorithmic analysis powered by machine learning and behavioral pattern recognition
                                    </p>
                                </div>

                                <div class="hero-metrics-grid">
                                    <!-- Trade Quality Card -->
                                    <div class="hero-metric-card quality-card glass-card">
                                        <div class="card-glow quality-glow"></div>
                                        <div class="metric-header">
                                            <div class="metric-icon">üéØ</div>
                                            <div class="metric-badge">QUALITY</div>
                                        </div>
                                        <div class="metric-value-container">
                                            <div class="metric-value-large" id="heroQualityScore">--</div>
                                            <div class="metric-value-suffix">/100</div>
                                        </div>
                                        <div class="metric-label">Trade Quality Score</div>
                                        <div class="metric-trend" id="heroQualityTrend">
                                            <span class="trend-icon">‚ñ≤</span>
                                            <span class="trend-value">-- from avg</span>
                                        </div>
                                        <div class="mini-gauge">
                                            <div class="gauge-fill" id="heroQualityGauge" style="width: 0%"></div>
                                        </div>
                                    </div>

                                    <!-- Win Prediction Card -->
                                    <div class="hero-metric-card prediction-card glass-card">
                                        <div class="card-glow prediction-glow"></div>
                                        <div class="metric-header">
                                            <div class="signal-light" id="heroSignalLight">
                                                <div class="signal-dot pulse"></div>
                                            </div>
                                            <div class="metric-badge">PREDICTION</div>
                                        </div>
                                        <div class="metric-value-container">
                                            <div class="metric-value-large" id="heroWinProbability">--</div>
                                            <div class="metric-value-suffix">%</div>
                                        </div>
                                        <div class="metric-label">Win Probability</div>
                                        <div class="recommendation-badge" id="heroRecommendation">
                                            <span class="rec-icon">üü°</span>
                                            <span class="rec-text">Calculating...</span>
                                        </div>
                                        <div class="confidence-bar">
                                            <div class="confidence-label">Confidence:</div>
                                            <div class="confidence-value" id="heroConfidence">--</div>
                                        </div>
                                    </div>

                                    <!-- Performance Forecast Card -->
                                    <div class="hero-metric-card performance-card glass-card">
                                        <div class="card-glow performance-glow"></div>
                                        <div class="metric-header">
                                            <div class="metric-icon">üí∞</div>
                                            <div class="metric-badge">FORECAST</div>
                                        </div>
                                        <div class="metric-value-container">
                                            <div class="metric-value-large" id="heroForecastValue">$--</div>
                                        </div>
                                        <div class="metric-label">Session Prediction</div>
                                        <div class="metric-trend" id="heroForecastTrend">
                                            <span class="trend-icon">‚ñ≤</span>
                                            <span class="trend-value">--% vs avg</span>
                                        </div>
                                        <div class="sparkline-container">
                                            <canvas id="heroSparkline" width="200" height="40"></canvas>
                                        </div>
                                    </div>
                                </div>

                                <div class="hero-actions">
                                    <button class="action-btn primary-action" onclick="triggerAnalysis()">
                                        <span class="btn-icon">‚ö°</span>
                                        <span class="btn-text">Analyze Now</span>
                                        <div class="btn-shimmer"></div>
                                    </button>
                                    <button class="action-btn secondary-action" onclick="showPredictionDetails()">
                                        <span class="btn-icon">üîÆ</span>
                                        <span class="btn-text">Predict Session</span>
                                    </button>
                                    <button class="action-btn outline-action" onclick="exportAnalysisReport()">
                                        <span class="btn-icon">üì§</span>
                                        <span class="btn-text">Export Report</span>
                                    </button>
                                </div>
                            </div>

                            <!-- ========== FOUNDATION ANALYTICS (Original Pattern Insights) ========== -->

                            <!-- Time-Based Performance Analysis -->
                            <div style="background: #1e293b; border: 1px solid #334155; border-radius: 12px; padding: 20px; margin-bottom: 24px;">
                                <h3 data-lang="time-based-performance" style="color: #f8fafc; font-size: 16px; margin-bottom: 16px;">Time-Based Performance Analysis</h3>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
                                    <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 16px; text-align: center;">
                                        <div data-lang="best-trading-hour" style="color: #94a3b8; font-size: 12px; margin-bottom: 8px;">Best Trading Hour</div>
                                        <div id="bestTradingHour" style="color: #10b981; font-size: 18px; font-weight: 700; margin-bottom: 4px;">--:--</div>
                                        <div id="bestHourPerformance" style="color: #64748b; font-size: 11px;"><span data-lang="win-rate-label">Win Rate</span>: --%</div>
                                    </div>
                                    <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 16px; text-align: center;">
                                        <div data-lang="worst-trading-hour" style="color: #94a3b8; font-size: 12px; margin-bottom: 8px;">Worst Trading Hour</div>
                                        <div id="worstTradingHour" style="color: #ef4444; font-size: 18px; font-weight: 700; margin-bottom: 4px;">--:--</div>
                                        <div id="worstHourPerformance" style="color: #64748b; font-size: 11px;"><span data-lang="win-rate-label">Win Rate</span>: --%</div>
                                    </div>
                                    <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 16px; text-align: center;">
                                        <div data-lang="optimal-sleep-range" style="color: #94a3b8; font-size: 12px; margin-bottom: 8px;">Optimal Sleep Range</div>
                                        <div id="optimalSleepRange" style="color: #3b82f6; font-size: 18px; font-weight: 700; margin-bottom: 4px;">-.- hours</div>
                                        <div id="sleepRangePerformance" style="color: #64748b; font-size: 11px;">Avg P&L: $--</div>
                                    </div>
                                    <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 16px; text-align: center;">
                                        <div data-lang="delay-impact" style="color: #94a3b8; font-size: 12px; margin-bottom: 8px;">Start Delay Impact</div>
                                        <div id="delayImpact" style="color: #f59e0b; font-size: 18px; font-weight: 700; margin-bottom: 4px;">--min</div>
                                        <div id="delayPerformance" style="color: #64748b; font-size: 11px;">Performance drop: --%</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Consecutive Trades Pattern -->
                            <div style="background: #1e293b; border: 1px solid #334155; border-radius: 12px; padding: 20px; margin-bottom: 24px;">
                                <h3 data-lang="consecutive-pattern" style="color: #f8fafc; font-size: 16px; margin-bottom: 16px;">Consecutive Trades Pattern</h3>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">
                                    <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 16px;">
                                        <div data-lang="after-losses" style="color: #94a3b8; font-size: 14px; margin-bottom: 12px;">Performance After Losses</div>
                                        <div style="color: #e4e4e7; font-size: 13px; margin-bottom: 8px;"><span data-lang="after-1-loss">After 1 loss</span>: <span id="after1Loss" style="font-weight: 600;">--%</span></div>
                                        <div style="color: #e4e4e7; font-size: 13px; margin-bottom: 8px;"><span data-lang="after-2-losses">After 2 losses</span>: <span id="after2Losses" style="font-weight: 600;">--%</span></div>
                                        <div style="color: #e4e4e7; font-size: 13px;"><span data-lang="after-3-losses">After 3+ losses</span>: <span id="after3Losses" style="font-weight: 600;">--%</span></div>
                                    </div>
                                    <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 16px;">
                                        <div data-lang="after-wins" style="color: #94a3b8; font-size: 14px; margin-bottom: 12px;">Performance After Wins</div>
                                        <div style="color: #e4e4e7; font-size: 13px; margin-bottom: 8px;"><span data-lang="after-1-win">After 1 win</span>: <span id="after1Win" style="font-weight: 600;">--%</span></div>
                                        <div style="color: #e4e4e7; font-size: 13px; margin-bottom: 8px;"><span data-lang="after-2-wins">After 2 wins</span>: <span id="after2Wins" style="font-weight: 600;">--%</span></div>
                                        <div style="color: #e4e4e7; font-size: 13px;"><span data-lang="after-3-wins">After 3+ wins</span>: <span id="after3Wins" style="font-weight: 600;">--%</span></div>
                                    </div>
                                </div>
                            </div>

                            <!-- AI-Generated Insights -->
                            <div style="background: #1e293b; border: 1px solid #334155; border-radius: 12px; padding: 20px; margin-bottom: 24px;">
                                <h3 data-lang="ai-insights" style="color: #f8fafc; font-size: 16px; margin-bottom: 16px;">AI-Generated Insights</h3>
                                <div id="aiInsightsList" style="display: grid; gap: 12px;">
                                    <div style="background: #0f172a; border-left: 4px solid #3b82f6; padding: 12px 16px; border-radius: 0 6px 6px 0;">
                                        <div data-lang="no-insights" style="color: #e4e4e7; font-size: 14px; line-height: 1.5;">Collect more psychology data to generate personalized insights.</div>
                                    </div>
                                </div>
                            </div>

                            <!-- ========== ADVANCED ALGORITHMIC INTELLIGENCE ========== -->

                            <!-- Multi-Factor Performance Attribution -->
                            <div style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border: 1px solid #334155; border-radius: 12px; padding: 24px; margin-bottom: 24px;">
                                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px;">
                                    <div style="width: 4px; height: 24px; background: linear-gradient(180deg, #3b82f6, #10b981); border-radius: 2px;"></div>
                                    <h3 data-lang="multi-factor-attribution" style="color: #f8fafc; font-size: 16px; font-weight: 600; margin: 0;">Multi-Factor Performance Attribution</h3>
                                </div>
                                <div id="multiFactorAttribution" style="padding: 12px;">
                                    <div style="color: #64748b; text-align: center; padding: 20px;">
                                        Loading feature importance analysis...
                                    </div>
                                </div>
                            </div>

                            <!-- Predictive Risk Score -->
                            <div style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border: 1px solid #334155; border-radius: 12px; padding: 24px; margin-bottom: 24px;">
                                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px;">
                                    <div style="width: 4px; height: 24px; background: linear-gradient(180deg, #f59e0b, #ef4444); border-radius: 2px;"></div>
                                    <h3 data-lang="predictive-risk-score" style="color: #f8fafc; font-size: 16px; font-weight: 600; margin: 0;">Predictive Risk Score</h3>
                                </div>
                                <div id="predictiveRiskScore" style="padding: 12px;">
                                    <div style="color: #64748b; text-align: center; padding: 20px;">
                                        Calculating real-time risk assessment...
                                    </div>
                                </div>
                            </div>

                            <!-- Behavioral Pattern Recognition -->
                            <div style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border: 1px solid #334155; border-radius: 12px; padding: 24px; margin-bottom: 24px;">
                                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px;">
                                    <div style="width: 4px; height: 24px; background: linear-gradient(180deg, #8b5cf6, #ec4899); border-radius: 2px;"></div>
                                    <h3 data-lang="behavioral-patterns" style="color: #f8fafc; font-size: 16px; font-weight: 600; margin: 0;">Behavioral Pattern Recognition</h3>
                                </div>
                                <div id="behavioralPatterns" style="padding: 12px;">
                                    <div style="color: #64748b; text-align: center; padding: 20px;">
                                        Analyzing trading patterns...
                                    </div>
                                </div>
                            </div>

                            <!-- Market Context Intelligence -->
                            <div style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border: 1px solid #334155; border-radius: 12px; padding: 24px; margin-bottom: 24px;">
                                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px;">
                                    <div style="width: 4px; height: 24px; background: linear-gradient(180deg, #06b6d4, #0891b2); border-radius: 2px;"></div>
                                    <h3 data-lang="market-intelligence" style="color: #f8fafc; font-size: 16px; font-weight: 600; margin: 0;">Market Context Intelligence</h3>
                                </div>
                                <div id="marketIntelligence" style="padding: 12px;">
                                    <div style="color: #64748b; text-align: center; padding: 20px;">
                                        Analyzing market conditions...
                                    </div>
                                </div>
                            </div>

                            <!-- Statistical Edge Analysis -->
                            <div style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border: 1px solid #334155; border-radius: 12px; padding: 24px; margin-bottom: 24px;">
                                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px;">
                                    <div style="width: 4px; height: 24px; background: linear-gradient(180deg, #10b981, #059669); border-radius: 2px;"></div>
                                    <h3 data-lang="statistical-edge" style="color: #f8fafc; font-size: 16px; font-weight: 600; margin: 0;">Statistical Edge Analysis</h3>
                                </div>
                                <div id="statisticalEdge" style="padding: 12px;">
                                    <div style="color: #64748b; text-align: center; padding: 20px;">
                                        Computing statistical significance...
                                    </div>
                                </div>
                            </div>

                            <!-- Adaptive Strategy Recommendations -->
                            <div style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border: 1px solid #334155; border-radius: 12px; padding: 24px;">
                                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px;">
                                    <div style="width: 4px; height: 24px; background: linear-gradient(180deg, #f59e0b, #d97706); border-radius: 2px;"></div>
                                    <h3 data-lang="adaptive-recommendations" style="color: #f8fafc; font-size: 16px; font-weight: 600; margin: 0;">Adaptive Strategy Recommendations</h3>
                                </div>
                                <div id="adaptiveRecommendations" style="padding: 12px;">
                                    <div style="color: #64748b; text-align: center; padding: 20px;">
                                        Generating personalized recommendations...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Psychology Page -->
            <div class="page" id="psychology">
                <div class="page-header">
                    <div>
                        <h1 class="page-title" data-lang="psychology-title">Trading Psychology Analytics</h1>
                        <p class="page-subtitle" data-lang="psychology-subtitle">Quantified psychological performance analysis</p>
                    </div>
                    <div class="page-header-info">
                        <div class="psychology-tabs">
                            <button class="psychology-tab active" data-lang="daily-input" onclick="showPsychologySection('input')">Daily Input</button>
                        </div>
                        <div class="date-navigation">
                            <button class="date-nav-btn" onclick="previousPsychologyDay()" title="Previous day">&larr;</button>
                            <div class="current-date-display" id="psychologyDateDisplay" onclick="showPsychologyDatePicker()">
                                <span id="psychologyDateText">Today</span>
                            </div>
                            <button class="date-nav-btn" onclick="nextPsychologyDay()" title="Next day">&rarr;</button>
                        </div>
                    </div>
                </div>
                
                <!-- Daily Input Section -->
                <div class="psychology-section active" id="psychologyInputSection">
                    <div class="psychology-container">
                        <h2 class="psychology-header" data-lang="daily-data-input">Daily Data Input</h2>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px; margin-bottom: 24px;">
                            <!-- Biological Data -->
                            <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 20px;">
                                <h3 data-lang="biological-data" style="color: #f8fafc; font-size: 16px; margin-bottom: 16px;">Biological Data</h3>
                                <div style="margin-bottom: 16px;">
                                    <label data-lang="sleep-hours" style="display: block; color: #94a3b8; font-size: 12px; margin-bottom: 4px;">Sleep Hours</label>
                                    <input id="sleepHours" max="12" min="0" placeholder="7.5" step="0.5" style="width: 100%; background: #1e293b; border: 1px solid #334155; color: #e4e4e7; padding: 8px 10px; border-radius: 6px;" type="number"/>
                                </div>
                                <div style="margin-bottom: 16px;">
                                    <label data-lang="stress-level" style="display: block; color: #94a3b8; font-size: 12px; margin-bottom: 4px;">Stress Level (1-5)</label>
                                    <input id="stressLevel" max="5" min="1" oninput="updateSliderDisplay('stressLevel', 'stressValue')" style="width: 100%; accent-color: #3b82f6;" type="range" value="3"/>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 4px;">
                                        <span style="color: #64748b; font-size: 11px;">Low</span>
                                        <span id="stressValue" style="color: #e4e4e7; font-size: 12px; font-weight: 600;">3</span>
                                        <span style="color: #64748b; font-size: 11px;">High</span>
                                    </div>
                                </div>
                                <div style="margin-bottom: 16px;">
                                    <label data-lang="confidence-level" style="display: block; color: #94a3b8; font-size: 12px; margin-bottom: 4px;">Confidence Level (1-5)</label>
                                    <input id="confidenceLevel" max="5" min="1" oninput="updateSliderDisplay('confidenceLevel', 'confidenceValue')" style="width: 100%; accent-color: #3b82f6;" type="range" value="3"/>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 4px;">
                                        <span style="color: #64748b; font-size: 11px;">Low</span>
                                        <span id="confidenceValue" style="color: #e4e4e7; font-size: 12px; font-weight: 600;">3</span>
                                        <span style="color: #64748b; font-size: 11px;">High</span>
                                    </div>
                                </div>
                                <div>
                                    <label data-lang="focus-level" style="display: block; color: #94a3b8; font-size: 12px; margin-bottom: 4px;">Focus Level (1-5)</label>
                                    <input id="focusLevel" max="5" min="1" oninput="updateSliderDisplay('focusLevel', 'focusValue')" style="width: 100%; accent-color: #3b82f6;" type="range" value="3"/>
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 4px;">
                                        <span style="color: #64748b; font-size: 11px;">Low</span>
                                        <span id="focusValue" style="color: #e4e4e7; font-size: 12px; font-weight: 600;">3</span>
                                        <span style="color: #64748b; font-size: 11px;">High</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Trading Environment -->
                            <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 20px;">
                                <h3 data-lang="trading-environment" style="color: #f8fafc; font-size: 16px; margin-bottom: 16px;">Trading Environment</h3>
                                <div style="margin-bottom: 16px;">
                                    <label data-lang="start-time" style="display: block; color: #94a3b8; font-size: 12px; margin-bottom: 4px;">Start Time</label>
                                    <input id="startTime" style="width: 100%; background: #1e293b; border: 1px solid #334155; color: #e4e4e7; padding: 8px 10px; border-radius: 6px;" type="time"/>
                                </div>
                                <div style="margin-bottom: 16px;">
                                    <label data-lang="end-time" style="display: block; color: #94a3b8; font-size: 12px; margin-bottom: 4px;">End Time</label>
                                    <input id="endTime" style="width: 100%; background: #1e293b; border: 1px solid #334155; color: #e4e4e7; padding: 8px 10px; border-radius: 6px;" type="time"/>
                                </div>
                                <div>
                                    <label data-lang="environment-type" style="display: block; color: #94a3b8; font-size: 12px; margin-bottom: 4px;">Environment Type</label>
                                    <select id="environmentType" style="width: 100%; background: #1e293b; border: 1px solid #334155; color: #e4e4e7; padding: 8px 10px; border-radius: 6px;">
                                        <option value="home">Home</option>
                                        <option value="cafe">Cafe</option>
                                        <option value="office">Office</option>
                                        <option value="hotel">Hotel</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Economic Pressure -->
                            <div style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 20px;">
                                <h3 data-lang="economic-pressure" style="color: #f8fafc; font-size: 16px; margin-bottom: 16px;">Economic Pressure</h3>
                                <div style="margin-bottom: 16px;">
                                    <label data-lang="account-balance" style="display: block; color: #94a3b8; font-size: 12px; margin-bottom: 4px;">Account Balance ($)</label>
                                    <input id="accountBalance" min="0" oninput="updateTargetPercentages()" placeholder="10000" style="width: 100%; background: #1e293b; border: 1px solid #334155; color: #e4e4e7; padding: 8px 10px; border-radius: 6px;" type="number"/>
                                </div>
                                <div style="margin-bottom: 16px;">
                                    <label data-lang="daily-target" style="display: block; color: #94a3b8; font-size: 12px; margin-bottom: 4px;">Daily P&L Target ($)</label>
                                    <div style="display: flex; gap: 8px; align-items: center;">
                                        <input id="dailyTarget" oninput="updateTargetPercentages()" placeholder="200" style="flex: 1; background: #1e293b; border: 1px solid #334155; color: #e4e4e7; padding: 8px 10px; border-radius: 6px;" type="number"/>
                                        <span id="dailyTargetPercent" style="color: #64748b; font-size: 12px; min-width: 40px;">0%</span>
                                    </div>
                                </div>
                                <div>
                                    <label data-lang="max-daily-loss" style="display: block; color: #94a3b8; font-size: 12px; margin-bottom: 4px;">Max Daily Loss ($)</label>
                                    <div style="display: flex; gap: 8px; align-items: center;">
                                        <input id="maxDailyLoss" oninput="updateTargetPercentages()" placeholder="500" style="flex: 1; background: #1e293b; border: 1px solid #334155; color: #e4e4e7; padding: 8px 10px; border-radius: 6px;" type="number"/>
                                        <span id="maxLossPercent" style="color: #64748b; font-size: 12px; min-width: 40px;">0%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div style="display: flex; gap: 12px; justify-content: center; margin-bottom: 24px;">
                            <button class="psychology-save-btn" data-lang="save-psychology-data" onclick="savePsychologyData()">Save Psychology Data</button>
                            <button class="psychology-save-btn" data-lang="reset-psychology-data" onclick="resetPsychologyData()" style="background: #ef4444;">Reset Data</button>
                        </div>
                        
                        <!-- Enhanced Visual Dashboard -->
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 32px;">
                            <!-- Sleep Performance Card -->
                            <div style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border: 2px solid #334155; border-radius: 12px; padding: 20px; position: relative; overflow: hidden;">
                                <div style="position: absolute; top: -50%; right: -50%; width: 100%; height: 100%; background: radial-gradient(circle, rgba(16, 185, 129, 0.1) 0%, transparent 70%); pointer-events: none;"></div>
                                <div style="position: relative; z-index: 1;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                                        <h3 data-lang="sleep-performance" style="color: #10b981; font-size: 16px; font-weight: 600;">Sleep Performance</h3>
                                        <div style="width: 40px; height: 40px; background: rgba(16, 185, 129, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                            <span style="font-size: 20px;">üõå</span>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: baseline; gap: 8px; margin-bottom: 8px;">
                                        <span id="sleepHoursDisplay" style="font-size: 28px; font-weight: 700; color: #e4e4e7;">0</span>
                                        <span style="color: #94a3b8; font-size: 14px;">hours</span>
                                    </div>
                                    <div id="sleepQualityIndicator" style="height: 4px; background: #334155; border-radius: 2px; overflow: hidden;">
                                        <div id="sleepQualityBar" style="height: 100%; background: linear-gradient(90deg, #ef4444, #f59e0b, #10b981); width: 0%; transition: width 0.3s ease;"></div>
                                    </div>
                                    <div id="sleepStatus" style="color: #94a3b8; font-size: 12px; margin-top: 8px;">No data</div>
                                </div>
                            </div>
                            
                            <!-- Environment Card -->
                            <div style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border: 2px solid #334155; border-radius: 12px; padding: 20px; position: relative; overflow: hidden;">
                                <div style="position: absolute; top: -50%; right: -50%; width: 100%; height: 100%; background: radial-gradient(circle, rgba(59, 130, 246, 0.1) 0%, transparent 70%); pointer-events: none;"></div>
                                <div style="position: relative; z-index: 1;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                                        <h3 data-lang="environment-score" style="color: #3b82f6; font-size: 16px; font-weight: 600;">Environment Score</h3>
                                        <div style="width: 40px; height: 40px; background: rgba(59, 130, 246, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                            <span style="font-size: 20px;">üè¢</span>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                                        <div style="width: 60px; height: 60px; position: relative;">
                                            <svg style="width: 100%; height: 100%; transform: rotate(-90deg);">
                                                <circle cx="30" cy="30" fill="none" r="25" stroke="#334155" stroke-width="4"></circle>
                                                <circle cx="30" cy="30" fill="none" id="environmentCircle" r="25" stroke="#3b82f6" stroke-dasharray="157" stroke-dashoffset="157" stroke-width="4" style="transition: stroke-dashoffset 0.5s ease;"></circle>
                                            </svg>
                                            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                                                <span id="environmentScore" style="font-size: 14px; font-weight: 700; color: #e4e4e7;">0</span>
                                            </div>
                                        </div>
                                        <div>
                                            <div id="environmentTypeDisplay" style="color: #e4e4e7; font-size: 14px; font-weight: 600;">-</div>
                                            <div id="environmentStatus" style="color: #94a3b8; font-size: 12px;">No data</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Emotional State Card -->
                            <div style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border: 2px solid #334155; border-radius: 12px; padding: 20px; position: relative; overflow: hidden;">
                                <div style="position: absolute; top: -50%; right: -50%; width: 100%; height: 100%; background: radial-gradient(circle, rgba(139, 92, 246, 0.1) 0%, transparent 70%); pointer-events: none;"></div>
                                <div style="position: relative; z-index: 1;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                                        <h3 data-lang="emotional-readiness" style="color: #8b5cf6; font-size: 16px; font-weight: 600;">Emotional Readiness</h3>
                                        <div style="width: 40px; height: 40px; background: rgba(139, 92, 246, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                            <span style="font-size: 20px;">üß†</span>
                                        </div>
                                    </div>
                                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 12px;">
                                        <div style="text-align: center;">
                                            <div id="stressDisplay" style="font-size: 18px; font-weight: 700; color: #e4e4e7;">3</div>
                                            <div style="color: #94a3b8; font-size: 10px;">Stress</div>
                                        </div>
                                        <div style="text-align: center;">
                                            <div id="confidenceDisplay" style="font-size: 18px; font-weight: 700; color: #e4e4e7;">3</div>
                                            <div style="color: #94a3b8; font-size: 10px;">Confidence</div>
                                        </div>
                                        <div style="text-align: center;">
                                            <div id="focusDisplay" style="font-size: 18px; font-weight: 700; color: #e4e4e7;">3</div>
                                            <div style="color: #94a3b8; font-size: 10px;">Focus</div>
                                        </div>
                                    </div>
                                    <div id="emotionalStatus" style="color: #94a3b8; font-size: 12px; text-align: center;">No data</div>
                                </div>
                            </div>
                            
                            <!-- Risk Assessment Card -->
                            <div style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border: 2px solid #334155; border-radius: 12px; padding: 20px; position: relative; overflow: hidden;">
                                <div style="position: absolute; top: -50%; right: -50%; width: 100%; height: 100%; background: radial-gradient(circle, rgba(245, 158, 11, 0.1) 0%, transparent 70%); pointer-events: none;"></div>
                                <div style="position: relative; z-index: 1;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                                        <h3 data-lang="risk-assessment" style="color: #f59e0b; font-size: 16px; font-weight: 600;">Risk Assessment</h3>
                                        <div style="width: 40px; height: 40px; background: rgba(245, 158, 11, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                            <span style="font-size: 20px;">‚ö†Ô∏è</span>
                                        </div>
                                    </div>
                                    <div style="margin-bottom: 12px;">
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                            <span style="color: #94a3b8; font-size: 12px;">Target Risk</span>
                                            <span id="targetRiskPercent" style="color: #e4e4e7; font-size: 12px; font-weight: 600;">0%</span>
                                        </div>
                                        <div style="background: #334155; height: 6px; border-radius: 3px; overflow: hidden;">
                                            <div id="targetRiskBar" style="height: 100%; background: linear-gradient(90deg, #10b981, #f59e0b, #ef4444); width: 0%; transition: width 0.3s ease;"></div>
                                        </div>
                                    </div>
                                    <div style="margin-bottom: 8px;">
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                            <span style="color: #94a3b8; font-size: 12px;">Max Loss Risk</span>
                                            <span id="maxLossRiskPercent" style="color: #e4e4e7; font-size: 12px; font-weight: 600;">0%</span>
                                        </div>
                                        <div style="background: #334155; height: 6px; border-radius: 3px; overflow: hidden;">
                                            <div id="maxLossRiskBar" style="height: 100%; background: linear-gradient(90deg, #10b981, #f59e0b, #ef4444); width: 0%; transition: width 0.3s ease;"></div>
                                        </div>
                                    </div>
                                    <div id="riskStatus" style="color: #94a3b8; font-size: 12px; text-align: center;">No data</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Performance Chart Section -->
                        <div style="background: #1e293b; border: 1px solid #334155; border-radius: 12px; padding: 24px; margin-bottom: 24px;">
                            <h3 data-lang="psychology-performance-chart" style="color: #f8fafc; font-size: 18px; font-weight: 600; margin-bottom: 20px; text-align: center;">Psychology vs Performance Analysis</h3>
                            <div style="height: 300px; display: flex; align-items: center; justify-content: center;">
                                <canvas id="psychologyPerformanceChart" style="max-width: 100%; max-height: 100%;"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Notes Page -->
            <div class="page" id="notes">
                <div class="page-header">
                    <div>
                        <h1 class="page-title" data-lang="notes-title">Trading Notes</h1>
                        <p class="page-subtitle" data-lang="notes-subtitle">Document your trading insights and thoughts</p>
                    </div>
                    <div class="notes-controls">
                        <button class="btn btn-primary" data-lang="new-note" onclick="showNoteEditor()">New Note</button>
                    </div>
                </div>
                
                <div class="notes-container">
                    <!-- Notes Tabs -->
                    <div class="notes-tabs">
                        <button class="notes-tab active" data-lang="all-notes" onclick="showNotesSection('all', this)">All</button>
                        <button class="notes-tab" data-lang="daily-review" onclick="showNotesSection('daily', this)">Daily Review</button>
                        <button class="notes-tab" data-lang="strategy" onclick="showNotesSection('strategy', this)">Strategy</button>
                        <button class="notes-tab" data-lang="general" onclick="showNotesSection('general', this)">General</button>
                    </div>
                    
                    <!-- Note Editor -->
                    <div class="note-editor" id="noteEditor" style="display: none;">
                        <div class="note-formatting-toolbar">
                            <button class="formatting-btn" onclick="toggleBold()" title="Bold">B</button>
                            <button class="formatting-btn" onclick="toggleItalic()" title="Italic">I</button>
                            <button class="formatting-btn" onclick="toggleUnderline()" title="Underline">U</button>
                            <select class="font-selector" id="fontSelector" onchange="changeFont()">
                                <option value="'Source Code Pro', monospace">Source Code Pro</option>
                                <option value="'JetBrains Mono', monospace">JetBrains Mono</option>
                                <option value="'Inter', sans-serif">Inter</option>
                                <option value="'Georgia', serif">Georgia</option>
                            </select>
                            <div class="color-picker">
                                <div class="color-option" onmousedown="event.preventDefault(); changeTextColor('#e4e4e7');" style="background-color: #e4e4e7;"></div>
                                <div class="color-option" onmousedown="event.preventDefault(); changeTextColor('#10b981');" style="background-color: #10b981;"></div>
                                <div class="color-option" onmousedown="event.preventDefault(); changeTextColor('#ef4444');" style="background-color: #ef4444;"></div>
                                <div class="color-option" onmousedown="event.preventDefault(); changeTextColor('#3b82f6');" style="background-color: #3b82f6;"></div>
                                <div class="color-option" onmousedown="event.preventDefault(); changeTextColor('#f59e0b');" style="background-color: #f59e0b;"></div>
                                <div class="color-option" onmousedown="event.preventDefault(); changeTextColor('#8b5cf6');" style="background-color: #8b5cf6;"></div>
                            </div>
                        </div>
                        <input class="note-title-input" data-lang="note-title-placeholder" id="noteTitle" placeholder="Enter note title..." type="text"/>
                        <div class="note-content-input" contenteditable="true" data-placeholder="Write your note here..." id="noteContentEditor"></div>
                        <div class="note-actions">
                            <button class="btn btn-secondary" data-lang="cancel" onclick="cancelNote()">Cancel</button>
                            <button class="btn btn-primary" data-lang="save-note" onclick="saveNote()">Save Note</button>
                        </div>
                    </div>
                    
                    <!-- Note View Mode -->
                    <div class="note-view-mode" id="noteViewMode" style="display: none;">
                        <div class="note-view-title" id="noteViewTitle"></div>
                        <div class="note-view-content" id="noteViewContent"></div>
                        <div class="note-view-actions">
                            <button class="btn btn-secondary" data-lang="back" onclick="backToNotesList()">Back</button>
                            <button class="btn btn-primary" data-lang="edit" onclick="editCurrentNote()">Edit</button>
                        </div>
                    </div>
                    
                    <!-- Notes Sections -->
                    <div class="note-section active" id="allNotesSection">
                        <div class="notes-list" id="allNotesList">
                            <div class="empty-state">
                                <div class="empty-state-icon">üìù</div>
                                <div data-lang="no-notes">No notes written yet. Click "New Note" to start.</div>
                            </div>
                        </div>
                    </div>
                    <div class="note-section" id="dailyNotesSection">
                        <div class="notes-list" id="dailyNotesList">
                            <div class="empty-state">
                                <div class="empty-state-icon">üìù</div>
                                <div data-lang="no-daily-notes">No daily review notes yet. Click "New Note" to start.</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="note-section" id="strategyNotesSection">
                        <div class="notes-list" id="strategyNotesList">
                            <div class="empty-state">
                                <div class="empty-state-icon">üìä</div>
                                <div data-lang="no-strategy-notes">No strategy notes yet. Click "New Note" to start.</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="note-section" id="generalNotesSection">
                        <div class="notes-list" id="generalNotesList">
                            <div class="empty-state">
                                <div class="empty-state-icon">üìÑ</div>
                                <div data-lang="no-general-notes">No general notes yet. Click "New Note" to start.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Trade List Page -->
            <div class="page" id="trades">
                <div class="page-header">
                    <div>
                        <h1 class="page-title" data-lang="tradelist-title">Trade List</h1>
                        <p class="page-subtitle" data-lang="tradelist-subtitle">Complete list of all your trades</p>
                    </div>
                    <div class="date-range-selector">
                        <input class="date-range-input" id="tradesStartDate" type="date"/>
                        <span style="color: #64748b;">to</span>
                        <input class="date-range-input" id="tradesEndDate" type="date"/>
                        <button class="btn btn-secondary" onclick="clearTradesRange()" style="padding: 4px 8px; font-size: 12px;">Clear</button>
                    </div>
                </div>
                
                <div class="trades-section">
                    <div class="trades-header">
                        <h2 data-lang="trade-history">Trade History</h2>
                        <div style="display: flex; gap: 12px; align-items: center;">
                            <button class="btn btn-secondary" data-lang="delete-selected" id="deleteSelectedListBtn" onclick="deleteSelectedTradesList()" style="display: none; background: #dc2626; border-color: #dc2626;">Delete Selected</button>
                            <div class="period-summary" id="allTradesSummary"></div>
                        </div>
                    </div>
                    <table class="trades-table">
                        <thead>
                            <tr>
                                <th style="width: 40px;">
                                    <input id="selectAllTradesList" onchange="toggleAllTradesList()" style="accent-color: #3b82f6;" type="checkbox"/>
                                </th>
                                <th data-lang="date">Date</th>
                                <th data-lang="symbol">Symbol</th>
                                <th data-lang="buy-price">Buy Price</th>
                                <th data-lang="sell-price">Sell Price</th>
                                <th data-lang="shares">Shares</th>
                                <th data-lang="amount">Amount</th>
                                <th data-lang="time">Time</th>
                                <th data-lang="pnl">P&L</th>
                                <th data-lang="return-pct">Return %</th>
                                <th data-lang="actions">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="allTradesTableBody">
                            <tr>
                                <td colspan="11">
                                    <div class="empty-state">
                                        <div class="empty-state-icon">üìä</div>
                                        <div data-lang="no-trades">No trades recorded yet</div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Settings Page -->
            <div class="page" id="settings">
                <div class="page-header">
                    <div>
                        <h1 class="page-title" data-lang="settings-title">Settings</h1>
                        <p class="page-subtitle" data-lang="settings-subtitle">Configure your trading journal preferences</p>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3 data-lang="general-settings">General Settings</h3>
                    <div class="settings-option">
                        <label data-lang="default-language">Default Language</label>
                        <select id="settingsLanguageSelect" onchange="changeLanguageFromSettings()">
                            <option value="en">English</option>
                            <option value="ko">ÌïúÍµ≠Ïñ¥</option>
                        </select>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3 data-lang="api-key-settings">API Key Settings</h3>
                    <div class="settings-option">
                        <label data-lang="alpha-vantage-api-key">Alpha Vantage API Key</label>
                        <input id="alphaVantageApiKeyInput" type="text" placeholder="Enter your Alpha Vantage API key" style="width: 100%; padding: 8px; border: 1px solid #334155; background: #0f172a; color: #f8fafc; border-radius: 6px; margin-top: 8px;"/>
                        <button class="settings-btn" data-lang="save-api-key" onclick="saveAlphaVantageApiKey()" style="margin-top: 8px;">Save API Key</button>
                    </div>
                </div>

                <div class="settings-section">
                    <h3 data-lang="data-management">Data Management</h3>
                    <button class="settings-btn" data-lang="export-data" onclick="exportData()">Export Data</button>
                    <button class="settings-btn" data-lang="import-data" onclick="importData()">Import Data</button>
                    <input accept=".json" id="importFileInput" onchange="handleFileImport()" style="display: none;" type="file"/>
                    <button class="settings-btn" data-lang="clear-market-cache" onclick="clearMarketCache()" style="margin-top: 8px;">Clear Market Data Cache</button>
                </div>

                <div class="settings-section">
                    <h3 data-lang="danger-zone">Danger Zone</h3>
                    <button class="settings-btn danger" data-lang="clear-all-data" onclick="clearAllData()">Clear All Data</button>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Chart.js ÎùºÏù¥Î∏åÎü¨Î¶¨ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    
    <!-- JavaScript ÌååÏùºÎì§ (ÏàúÏÑú Ï§ëÏöî!) -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/market-data.js"></script>
    <script src="js/trading.js"></script>
    <script src="js/analytics.js"></script>
    <script src="js/ai-analysis-functions.js"></script>
    <script src="js/hero-dashboard.js"></script>
    <script src="js/psychology.js"></script>
    <script src="js/calendar.js"></script>
    <script src="js/notes.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
